# ────────────────────────────────────────────────────────────────
# 1️⃣ Global defaults – you can leave empty
# ────────────────────────────────────────────────────────────────
global: {}

# ────────────────────────────────────────────────────────────────
# 2️⃣ Synapse (the Matrix homeserver)
# ────────────────────────────────────────────────────────────────
synapse:
  # ----- Server‑level configuration -----
  server:
    # Public domain that Matrix clients will use
    serverName: "ess-helm-production.up.railway.app"

    # ----- Ingress for the Synapse HTTP API -----
    ingress:
      host: "ess-helm-production.up.railway.app"

  # ----- Database configuration -----
  database:
    # DSN that points to the *synapse_db* you created on Railway
    url: "postgresql://synapse_user:SynapsePass123@postgres.railway.internal:5432/synapse_db"
    # If you prefer the public host instead of the internal one,
    # replace `postgres.railway.internal` with the value of PGHOST
    # (e.g. aws-us-east-1-portal.0.dblayer.com).

# ────────────────────────────────────────────────────────────────
# 3️⃣ Matrix Authentication Service (MAS)
# ────────────────────────────────────────────────────────────────
mas:
  enabled: true

  # ----- Database for MAS -----
  database:
    url: "postgresql://mas_user:MasPass456@postgres.railway.internal:5432/mas_db"

  # ----- Ingress for MAS -----
  ingress:
    host: "ess-helm-production.up.railway.app"

# ────────────────────────────────────────────────────────────────
# 4️⃣ UI components – you can keep them enabled if you want a web UI
# ────────────────────────────────────────────────────────────────
elementWeb:
  enabled: true
  ingress:
    host: "ess-helm-production.up.railway.app"

elementAdmin:
  enabled: true
  ingress:
    host: "ess-helm-production.up.railway.app"

matrixRTC:
  enabled: true
  ingress:
    host: "ess-helm-production.up.railway.app"

# ────────────────────────────────────────────────────────────────
# 5️⃣ Well‑known delegation (optional)
# ────────────────────────────────────────────────────────────────
wellKnownDelegation:
  enabled: true # still needs `serverName` (already set above under synapse.server)
